@model kits.ViewModels.CartCheckoutIndexViewModel

@{
    ViewBag.Title = "Index";
    var cart = Model.Cart;
    var user = Model.User;
}

@if (cart.Products.Count == 0)
{
    <div>
        <br />
        <br />
        <br />
        <br />
        <div class="textcenter titletext">Your order has been placed. Thank you for shopping at Kits.dk!</div>
        <br />
        <br />
        <div class="button-center">
            <input type="submit" class="button blue" value="Continue shopping" onclick="location.href = '@(Url.Action("Index", "products", null))'" />
            @*@Html.ActionLink("Continue shopping", "Index", "products", null, new { @class = "btn btn-primary" })*@
        </div>
        <br />
        <br />
        <br />
        <br />
    </div>
}
else
{
    <br />
    <br />
    <div class="titletext ">Checkout</div>
    
    <div class="wrapper-button">
        <div class="grid-4x4">
            @foreach (var product in cart.Products)
            {
                <div class="griditem">

                    @if (product.image == null)
                    {
                        <img src="~/images/placeholder.jpg" class="shopimage" />
                    }
                    else
                    {
                        String imagepath = product.image.imagestring + ".jpg";
                        <img src="~/Content/img/product/@imagepath" class="shopimage" />

                    }
                </div>

                <div class="griditem">@Html.DisplayFor(modelItem => product.product_name)</div>


                <div class="griditem">
                    S
                </div>
                <div class="griditem">
                    @Html.DisplayFor(modelItem => product.product_price) DKK
                </div>

              

            }
        </div>
        <div class="grid-4x4">
            <div></div><div></div><div></div>
            <div style="text-align:right; width:100%;">
                <p>Total: @Model.Cart.TotalPrice.ToString("n") DKK</p>
            </div>
        </div>
        

        @Html.BeginForm()
        @Html.AntiForgeryToken()

       

        <div class="form-horizontal">
            <h4>Please create a user to place an order</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="grid-2x2">
                <div>
                    <div class="grid-2x2">


                        <div class="form-group">
                            @Html.LabelFor(model => user.user_email, "E-mail")
                            <div >
                                @Html.EditorFor(model => user.user_email)
                                @Html.ValidationMessageFor(model => user.user_email, "" )
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => user.user_pasword, "Password")
                            <div >
                                @Html.EditorFor(model => user.user_pasword)
                                @Html.ValidationMessageFor(model => user.user_pasword, "")
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => user.user_address, "Address")
                            <div >
                                @Html.EditorFor(model => user.user_address)
                                @Html.ValidationMessageFor(model => user.user_address, "")
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => user.user_firstname, "First name")
                            <div class="col-md-10">
                                @Html.EditorFor(model => user.user_firstname)
                                @Html.ValidationMessageFor(model => user.user_firstname, "")
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => user.user_lastname, "Last name")
                            <div >
                                @Html.EditorFor(model => user.user_lastname)
                                @Html.ValidationMessageFor(model => user.user_lastname, "")
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => user.user_phone, "Phone")
                            <div >
                                @Html.EditorFor(model => user.user_phone)
                                @Html.ValidationMessageFor(model => user.user_phone, "")
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => user.user_zipcode, "Zipcode")
                            <div >
                                @Html.EditorFor(model => user.user_zipcode)
                                @Html.ValidationMessageFor(model => user.user_zipcode, "")
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => user.user_city, "City")
                            <div >
                                @Html.EditorFor(model => user.user_city)
                                @Html.ValidationMessageFor(model => user.user_city, "")
                            </div>
                        </div>

                        
                    </div>
                </div>
                
                    <div class="form-group mobilehidden" >
                        
                            <input type="submit" value="Place order" class="button blue"  />
                        
                    </div>
               
            </div>
            <div class="form-group desktophidden">
                <br />
                <input type="submit" value="Place order" class="button blue" />

            </div>
            </div>
    </div>
}

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }
